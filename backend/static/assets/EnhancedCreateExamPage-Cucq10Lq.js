import{r as j,j as e,T as C,P as I,S as M,B as R,C as Q,b as P}from"./index-BxF1agQl.js";import{C as T}from"./CheckCircleIcon-DG0L9nwl.js";const z=({question:t,onQuestionChange:N,onRemove:v,questionIndex:k})=>{const[o,g]=j.useState(!1),n=(r,x)=>{N({...t,[r]:x})},w=()=>{const r={id:Date.now().toString(),name:"",description:"",max_points:5};n("rubric_criteria",[...t.rubric_criteria,r])},u=(r,x,y)=>{const h=t.rubric_criteria.map(s=>s.id===r?{...s,[x]:y}:s);n("rubric_criteria",h)},_=r=>{const x=t.rubric_criteria.filter(y=>y.id!==r);n("rubric_criteria",x)},l=async()=>{const r=`This is an AI-generated sample answer for: "${t.question_text}". 

The response demonstrates key concepts and provides a structured approach to answering the question. Students should aim to include relevant examples, clear explanations, and logical reasoning in their responses.

Key points to address:
1. Main concept explanation
2. Supporting evidence or examples  
3. Analysis and critical thinking
4. Clear conclusion or summary

This sample can help guide both students and instructors in understanding the expected depth and quality of responses.`;n("sample_answer",r)},d=t.rubric_criteria.reduce((r,x)=>r+x.max_points,0);return e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:["Essay Question ",k+1]}),e.jsx("button",{onClick:v,className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx(C,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Essay Question"}),e.jsx("textarea",{value:t.question_text,onChange:r=>n("question_text",r.target.value),placeholder:"Enter your essay question here. Be specific about what you want students to analyze, discuss, or explain...",className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none",rows:4})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Maximum Words"}),e.jsx("input",{type:"number",value:t.max_words,onChange:r=>n("max_words",parseInt(r.target.value)||0),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",min:"50",max:"2000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Base Points"}),e.jsx("input",{type:"number",value:t.points,onChange:r=>n("points",parseInt(r.target.value)||0),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",min:"1",max:"100"})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.ai_grading_enabled,onChange:r=>n("ai_grading_enabled",r.target.checked),className:"w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Enable AI Grading"})]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h4",{className:"text-md font-semibold text-slate-800 dark:text-slate-100",children:["Grading Rubric ",d>0&&`(${d} points total)`]}),e.jsx("button",{onClick:()=>g(!o),className:"px-3 py-1 text-sm bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded-lg hover:bg-indigo-200 dark:hover:bg-indigo-900/50 transition-colors",children:o?"Hide Rubric":"Build Rubric"})]}),o&&e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-lg p-4",children:[t.rubric_criteria.map(r=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-4 mb-3 border border-slate-200 dark:border-slate-600",children:[e.jsx("div",{className:"flex justify-between items-start mb-3",children:e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx("input",{type:"text",placeholder:"Criterion name (e.g., Content Quality)",value:r.name,onChange:x=>u(r.id,"name",x.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),e.jsx("input",{type:"number",placeholder:"Max points",value:r.max_points,onChange:x=>u(r.id,"max_points",parseInt(x.target.value)||0),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",min:"1",max:"20"}),e.jsx("button",{onClick:()=>_(r.id),className:"px-3 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx(C,{className:"w-4 h-4"})})]})}),e.jsx("textarea",{placeholder:"Describe what constitutes different performance levels for this criterion...",value:r.description,onChange:x=>u(r.id,"description",x.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none",rows:2})]},r.id)),e.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[e.jsx(I,{className:"w-4 h-4"}),"Add Rubric Criterion"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h4",{className:"text-md font-semibold text-slate-800 dark:text-slate-100",children:"Sample Answer (Optional)"}),e.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-3 py-1 text-sm bg-teal-100 dark:bg-teal-900/30 text-teal-700 dark:text-teal-300 rounded-lg hover:bg-teal-200 dark:hover:bg-teal-900/50 transition-colors",children:[e.jsx(M,{className:"w-4 h-4"}),"Generate with AI"]})]}),e.jsx("textarea",{value:t.sample_answer||"",onChange:r=>n("sample_answer",r.target.value),placeholder:"Provide a sample answer to help guide grading and give students an example of expected quality...",className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none",rows:6})]}),t.question_text&&e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-lg p-4",children:[e.jsx("h5",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Preview:"}),e.jsx("p",{className:"text-slate-800 dark:text-slate-100 mb-2",children:t.question_text}),e.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Maximum ",t.max_words," words • ",t.points," base points",d>0&&` + ${d} rubric points`,t.ai_grading_enabled&&" • AI Grading Enabled"]})]})]})},D=({question:t,onQuestionChange:N,onRemove:v,questionIndex:k})=>{const o=(g,n)=>{N({...t,[g]:n})};return e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:["True/False Question ",k+1]}),e.jsx("button",{onClick:v,className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx(C,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Statement"}),e.jsx("textarea",{value:t.question_text,onChange:g=>o("question_text",g.target.value),placeholder:"Enter a clear statement that can be definitively true or false...",className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none",rows:3})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Correct Answer"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>o("correct_answer",!0),className:`flex items-center gap-2 px-4 py-3 rounded-lg border-2 transition-colors ${t.correct_answer===!0?"border-green-500 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"border-slate-300 dark:border-slate-600 hover:border-green-300 dark:hover:border-green-500"}`,children:[t.correct_answer===!0&&e.jsx(T,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"TRUE"})]}),e.jsxs("button",{onClick:()=>o("correct_answer",!1),className:`flex items-center gap-2 px-4 py-3 rounded-lg border-2 transition-colors ${t.correct_answer===!1?"border-red-500 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300":"border-slate-300 dark:border-slate-600 hover:border-red-300 dark:hover:border-red-500"}`,children:[t.correct_answer===!1&&e.jsx(T,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"FALSE"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Points"}),e.jsx("input",{type:"number",value:t.points,onChange:g=>o("points",parseInt(g.target.value)||1),className:"w-24 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",min:"1",max:"10"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Explanation (Optional)"}),e.jsx("textarea",{value:t.explanation||"",onChange:g=>o("explanation",g.target.value),placeholder:"Explain why this statement is true or false to help students learn...",className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none",rows:3})]}),t.question_text&&e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-lg p-4",children:[e.jsx("h5",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Preview:"}),e.jsx("p",{className:"text-slate-800 dark:text-slate-100 mb-3",children:t.question_text}),e.jsxs("div",{className:"flex gap-3 mb-3",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${t.correct_answer===!0?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 font-medium":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400"}`,children:"True"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${t.correct_answer===!1?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 font-medium":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400"}`,children:"False"})]}),e.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[t.points," point",t.points!==1?"s":""," • Correct answer: ",t.correct_answer?"TRUE":"FALSE"]})]})]})},B=({question:t,onQuestionChange:N,onRemove:v,questionIndex:k})=>{const[o,g]=j.useState(""),n=(l,d)=>{N({...t,[l]:d})},w=()=>{o.trim()&&(n("correct_answers",[...t.correct_answers,o.trim()]),g(""))},u=l=>{const d=t.correct_answers.filter((r,x)=>x!==l);n("correct_answers",d)},_=(l,d)=>{const r=[...t.correct_answers];r[l]=d,n("correct_answers",r)};return e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:["Short Answer Question ",k+1]}),e.jsx("button",{onClick:v,className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx(C,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Question"}),e.jsx("textarea",{value:t.question_text,onChange:l=>n("question_text",l.target.value),placeholder:"Enter a question that can be answered with a short phrase or sentence...",className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none",rows:3})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Correct Answers"}),e.jsx("div",{className:"space-y-2 mb-3",children:t.correct_answers.map((l,d)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:l,onChange:r=>_(d,r.target.value),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"Acceptable answer"}),e.jsx("button",{onClick:()=>u(d),className:"px-3 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx(C,{className:"w-4 h-4"})})]},d))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:o,onChange:l=>g(l.target.value),onKeyPress:l=>l.key==="Enter"&&w(),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"Add another acceptable answer"}),e.jsx("button",{onClick:w,disabled:!o.trim(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(I,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:"Add multiple acceptable answers to account for different phrasings"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Points"}),e.jsx("input",{type:"number",value:t.points,onChange:l=>n("points",parseInt(l.target.value)||1),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",min:"1",max:"10"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Max Characters"}),e.jsx("input",{type:"number",value:t.max_length,onChange:l=>n("max_length",parseInt(l.target.value)||100),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",min:"10",max:"500"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Matching Options"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.case_sensitive,onChange:l=>n("case_sensitive",l.target.checked),className:"w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:'Case sensitive (e.g., "DNA" ≠ "dna")'})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.exact_match,onChange:l=>n("exact_match",l.target.checked),className:"w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Exact match only (no partial credit for similar answers)"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Explanation (Optional)"}),e.jsx("textarea",{value:t.explanation||"",onChange:l=>n("explanation",l.target.value),placeholder:"Provide additional context or explanation for the correct answer...",className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none",rows:3})]}),t.question_text&&e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-lg p-4",children:[e.jsx("h5",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Preview:"}),e.jsx("p",{className:"text-slate-800 dark:text-slate-100 mb-3",children:t.question_text}),e.jsxs("div",{className:"mb-3",children:[e.jsx("input",{type:"text",placeholder:"Student answer input...",disabled:!0,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-slate-100 dark:bg-slate-600 text-slate-500 dark:text-slate-400",maxLength:t.max_length}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["Max ",t.max_length," characters"]})]}),t.correct_answers.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Acceptable answers:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.correct_answers.map((l,d)=>e.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-xs rounded-full",children:l},d))})]}),e.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[t.points," point",t.points!==1?"s":""," •",t.case_sensitive?" Case sensitive":" Case insensitive"," •",t.exact_match?" Exact match":" Flexible matching"]})]})]})},F=({question:t,onQuestionChange:N,onRemove:v,questionIndex:k})=>{const[o,g]=j.useState(""),[n,w]=j.useState(!1),u=(s,m)=>{const p={...t,[s]:m};s==="passage_text"&&(p.word_count=m.trim().split(/\s+/).length),N(p)},_=()=>{const s={id:Date.now().toString(),question_text:"",question_type:"multiple_choice",options:["","","",""],correct_answer:0,points:1};u("questions",[...t.questions,s]),w(!0)},l=(s,m,p)=>{const b=t.questions.map(f=>f.id===s?{...f,[m]:p}:f);u("questions",b)},d=s=>{const m=t.questions.filter(p=>p.id!==s);u("questions",m)},r=()=>{const s=window.getSelection();s&&s.toString().trim()&&g(s.toString().trim())},x=()=>Math.ceil(t.word_count/225),y=()=>t.questions.reduce((s,m)=>s+m.points,0),h=(s,m)=>{var p;return e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-lg p-4 mb-4 border border-slate-200 dark:border-slate-600",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("h4",{className:"font-medium text-slate-800 dark:text-slate-100",children:["Question ",m+1]}),e.jsx("button",{onClick:()=>d(s.id),className:"p-1 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",children:e.jsx(C,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Question Type"}),e.jsxs("select",{value:s.question_type,onChange:b=>l(s.id,"question_type",b.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),e.jsx("option",{value:"short_answer",children:"Short Answer"}),e.jsx("option",{value:"true_false",children:"True/False"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Question"}),e.jsx("textarea",{value:s.question_text,onChange:b=>l(s.id,"question_text",b.target.value),placeholder:"Enter your question about the passage...",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none",rows:2})]}),s.question_type==="multiple_choice"&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Answer Options"}),(p=s.options)==null?void 0:p.map((b,f)=>e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("input",{type:"radio",name:`correct-${s.id}`,checked:s.correct_answer===f,onChange:()=>l(s.id,"correct_answer",f),className:"w-4 h-4 text-indigo-600"}),e.jsx("input",{type:"text",value:b,onChange:E=>{const S=[...s.options||[]];S[f]=E.target.value,l(s.id,"options",S)},placeholder:`Option ${f+1}`,className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]},f))]}),s.question_type==="true_false"&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Correct Answer"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:`tf-${s.id}`,checked:s.correct_answer===!0,onChange:()=>l(s.id,"correct_answer",!0),className:"w-4 h-4 text-indigo-600 mr-2"}),"True"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:`tf-${s.id}`,checked:s.correct_answer===!1,onChange:()=>l(s.id,"correct_answer",!1),className:"w-4 h-4 text-indigo-600 mr-2"}),"False"]})]})]}),s.question_type==="short_answer"&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Correct Answer"}),e.jsx("input",{type:"text",value:s.correct_answer,onChange:b=>l(s.id,"correct_answer",b.target.value),placeholder:"Enter the correct answer",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Points"}),e.jsx("input",{type:"number",value:s.points,onChange:b=>l(s.id,"points",parseInt(b.target.value)||1),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",min:"1",max:"10"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Reference Text"}),e.jsx("input",{type:"text",value:s.passage_reference||o,onChange:b=>l(s.id,"passage_reference",b.target.value),placeholder:"Specific passage text this refers to",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})]})]},s.id)};return e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"}),e.jsxs("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:["Reading Comprehension ",k+1]})]}),e.jsx("button",{onClick:v,className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx(C,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Passage Title"}),e.jsx("input",{type:"text",value:t.passage_title,onChange:s=>u("passage_title",s.target.value),placeholder:"Enter passage title",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Difficulty Level"}),e.jsxs("select",{value:t.difficulty,onChange:s=>u("difficulty",s.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"easy",children:"Easy"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"hard",children:"Hard"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Reading Passage"}),e.jsx("textarea",{value:t.passage_text,onChange:s=>u("passage_text",s.target.value),onMouseUp:r,placeholder:"Paste or type the reading passage here. Students will read this text and answer questions based on it...",className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none",rows:8}),e.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-slate-500 dark:text-slate-400",children:[e.jsxs("span",{children:[t.word_count," words • ~",x()," min read"]}),o&&e.jsxs("span",{className:"text-indigo-600 dark:text-indigo-400",children:['Selected: "',o.substring(0,30),'..."']})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h4",{className:"text-md font-semibold text-slate-800 dark:text-slate-100",children:["Comprehension Questions (",t.questions.length,") • ",y()," points total"]}),e.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-3 py-1 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-sm",children:[e.jsx(I,{className:"w-4 h-4"}),"Add Question"]})]}),t.questions.map((s,m)=>h(s,m)),t.questions.length===0&&e.jsxs("div",{className:"text-center py-8 bg-slate-50 dark:bg-slate-700/50 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600",children:[e.jsx(R,{className:"w-12 h-12 text-slate-400 mx-auto mb-2"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No questions added yet"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500",children:"Add questions based on the reading passage"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:!!t.reading_time_limit,onChange:s=>u("reading_time_limit",s.target.checked?x()+2:void 0),className:"w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Set reading time limit"})]}),t.reading_time_limit&&e.jsxs("div",{className:"mt-2 ml-6",children:[e.jsx("input",{type:"number",value:t.reading_time_limit,onChange:s=>u("reading_time_limit",parseInt(s.target.value)||void 0),className:"w-20 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",min:"1",max:"60"}),e.jsx("span",{className:"ml-2 text-sm text-slate-600 dark:text-slate-400",children:"minutes"})]})]}),t.passage_text&&t.questions.length>0&&e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-lg p-4",children:[e.jsx("h5",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Preview:"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-100 mb-2",children:t.passage_title}),e.jsxs("p",{className:"text-slate-600 dark:text-slate-400 mb-2",children:[t.passage_text.substring(0,150),"..."]}),e.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[t.questions.length," question",t.questions.length!==1?"s":""," •",y()," points •",t.difficulty," difficulty",t.reading_time_limit&&` • ${t.reading_time_limit} min limit`]})]})]})]})},L={free:{can_create_essay:!1,can_create_passage:!1,can_create_advanced:!1,max_questions:10},learner:{can_create_essay:!0,can_create_passage:!1,can_create_advanced:!1,max_questions:50},pro:{can_create_essay:!0,can_create_passage:!0,can_create_advanced:!0,max_questions:"unlimited"},pro_plus:{can_create_essay:!0,can_create_passage:!0,can_create_advanced:!0,max_questions:"unlimited"},admin:{can_create_essay:!0,can_create_passage:!0,can_create_advanced:!0,max_questions:"unlimited"}},G=({onExamCreated:t,onCancel:N,userTier:v})=>{const[k,o]=j.useState(""),[g,n]=j.useState(""),[w,u]=j.useState(""),[_,l]=j.useState(30),[d,r]=j.useState([]),[x,y]=j.useState("multiple_choice"),h=L[v],s=a=>{const c={id:Date.now().toString(),type:a,points:1};switch(a){case"multiple_choice":return{...c,type:"multiple_choice",question_text:"",options:["","","",""],correct_answer_index:0};case"true_false":return{...c,type:"true_false",question_text:"",correct_answer:!0};case"short_answer":return{...c,type:"short_answer",question_text:"",correct_answers:[""],case_sensitive:!1,exact_match:!1,max_length:100};case"essay":return{...c,type:"essay",question_text:"",max_words:500,points:10,rubric_criteria:[],ai_grading_enabled:!0};case"passage":return{...c,type:"passage",passage_text:"",passage_title:"",questions:[],word_count:0,difficulty:"medium",points:5};default:throw new Error(`Unknown question type: ${a}`)}},m=a=>{if(d.length>=h.max_questions){alert(`You can only create ${h.max_questions} questions with your current plan.`);return}if(a==="essay"&&!h.can_create_essay){alert("Essay questions are available for Learner and higher tiers. Please upgrade to access this feature.");return}if(a==="passage"&&!h.can_create_passage){alert("Passage-based reading comprehension is available for Pro and Premium users. Please upgrade to access this feature.");return}const i=s(a);r([...d,i])},p=(a,i)=>{r(d.map(c=>c.id===a?i:c))},b=a=>{r(d.filter(i=>i.id!==a))},f=()=>{if(!k.trim()){alert("Please enter an exam title");return}if(d.length===0){alert("Please add at least one question");return}if(d.filter(c=>{var A;return!((A=c.question_text)!=null&&A.trim())}).length>0){alert("Please complete all questions before saving");return}const i={title:k.trim(),topic:g.trim(),description:w.trim(),time_limit_minutes:_,questions:d};t(i)},E=d.reduce((a,i)=>{if(i.type==="essay"){const c=i.rubric_criteria.reduce((A,$)=>A+$.max_points,0);return a+i.points+c}return a+i.points},0),S=(a,i)=>{switch(a.type){case"multiple_choice":return e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6 mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-4",children:["Multiple Choice Question ",i+1]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Multiple choice question creator - integrate existing CreateExamPage component"})]},a.id);case"true_false":return e.jsx(D,{question:a,onQuestionChange:c=>p(a.id,c),onRemove:()=>b(a.id),questionIndex:i},a.id);case"short_answer":return e.jsx(B,{question:a,onQuestionChange:c=>p(a.id,c),onRemove:()=>b(a.id),questionIndex:i},a.id);case"essay":return e.jsx(z,{question:a,onQuestionChange:c=>p(a.id,c),onRemove:()=>b(a.id),questionIndex:i},a.id);case"passage":return e.jsx(F,{question:a,onQuestionChange:c=>p(a.id,c),onRemove:()=>b(a.id),questionIndex:i},a.id);default:return null}};return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 mb-2",children:"Create New Assessment"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Build a comprehensive assessment with multiple question types"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100 mb-4",children:"Assessment Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Title *"}),e.jsx("input",{type:"text",value:k,onChange:a=>o(a.target.value),placeholder:"Enter assessment title",className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Topic"}),e.jsx("input",{type:"text",value:g,onChange:a=>n(a.target.value),placeholder:"Subject or topic area",className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{value:w,onChange:a=>u(a.target.value),placeholder:"Describe what this assessment covers",className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Time Limit (minutes)"}),e.jsx("input",{type:"number",value:_,onChange:a=>l(parseInt(a.target.value)||30),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",min:"5",max:"300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Questions"}),e.jsxs("div",{className:"px-4 py-2 bg-slate-50 dark:bg-slate-700 rounded-lg text-slate-800 dark:text-slate-100 font-medium",children:[d.length," / ",h.max_questions===1/0?"∞":h.max_questions]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Total Points"}),e.jsxs("div",{className:"px-4 py-2 bg-slate-50 dark:bg-slate-700 rounded-lg text-slate-800 dark:text-slate-100 font-medium",children:[E," points"]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100 mb-4",children:"Add Questions"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("button",{onClick:()=>m("multiple_choice"),className:"p-4 border border-slate-200 dark:border-slate-600 rounded-lg hover:border-indigo-300 dark:hover:border-indigo-500 transition-colors group",children:[e.jsx(Q,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400 mx-auto mb-2 group-hover:scale-110 transition-transform"}),e.jsx("h3",{className:"font-medium text-slate-800 dark:text-slate-100 text-sm",children:"Multiple Choice"})]}),e.jsxs("button",{onClick:()=>m("true_false"),className:"p-4 border border-slate-200 dark:border-slate-600 rounded-lg hover:border-green-300 dark:hover:border-green-500 transition-colors group",children:[e.jsx(T,{className:"w-8 h-8 text-green-600 dark:text-green-400 mx-auto mb-2 group-hover:scale-110 transition-transform"}),e.jsx("h3",{className:"font-medium text-slate-800 dark:text-slate-100 text-sm",children:"True/False"})]}),e.jsxs("button",{onClick:()=>m("short_answer"),className:"p-4 border border-slate-200 dark:border-slate-600 rounded-lg hover:border-blue-300 dark:hover:border-blue-500 transition-colors group",children:[e.jsx(P,{className:"w-8 h-8 text-blue-600 dark:text-blue-400 mx-auto mb-2 group-hover:scale-110 transition-transform"}),e.jsx("h3",{className:"font-medium text-slate-800 dark:text-slate-100 text-sm",children:"Short Answer"})]}),e.jsxs("button",{onClick:()=>m("essay"),disabled:!h.can_create_essay,className:`p-4 border border-slate-200 dark:border-slate-600 rounded-lg transition-colors group ${h.can_create_essay?"hover:border-purple-300 dark:hover:border-purple-500":"opacity-50 cursor-not-allowed"}`,children:[e.jsx(P,{className:"w-8 h-8 text-purple-600 dark:text-purple-400 mx-auto mb-2 group-hover:scale-110 transition-transform"}),e.jsxs("h3",{className:"font-medium text-slate-800 dark:text-slate-100 text-sm",children:["Essay ",!h.can_create_essay&&"(Learner+)"]})]}),e.jsxs("button",{onClick:()=>m("passage"),disabled:!h.can_create_passage,className:`p-4 border border-slate-200 dark:border-slate-600 rounded-lg transition-colors group ${h.can_create_passage?"hover:border-orange-300 dark:hover:border-orange-500":"opacity-50 cursor-not-allowed"}`,children:[e.jsx(P,{className:"w-8 h-8 text-orange-600 dark:text-orange-400 mx-auto mb-2 group-hover:scale-110 transition-transform"}),e.jsxs("h3",{className:"font-medium text-slate-800 dark:text-slate-100 text-sm",children:["Reading Passage ",!h.can_create_passage&&"(Pro+)"]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[d.map((a,i)=>S(a,i)),d.length===0&&e.jsxs("div",{className:"text-center py-12 bg-slate-50 dark:bg-slate-800 rounded-xl border-2 border-dashed border-slate-300 dark:border-slate-600",children:[e.jsx(Q,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"No questions added yet"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-500",children:"Click one of the question type buttons above to get started"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{onClick:N,className:"px-6 py-3 text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200 transition-colors",children:"Cancel"}),e.jsx("div",{className:"flex gap-3",children:e.jsx("button",{onClick:f,disabled:!k.trim()||d.length===0,className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:"Create Assessment"})})]})]})};export{G as EnhancedCreateExamPage};
